# Subnet 

흔히 사용되는 IPv4 주소체계는 클래스를 나누어 IP를 할당한다. 하지만 이 방식은 매우 비효율적이다. 예를 들어 어떤 기관에서  
A 클래스를 할당한다고 하면 16,777,214개의 호스트를 할당할 수 있게 되는데, 이 기관이 100개의 호스트를 할당한다고 하더라도   
16,777,714 개의 호스트가 낭비되게 된다. 이러한 비효율성을 해결하기 위해 네트워크 장치들의 수에 따라 효율적으로 사용할 수 있는     
서브넷이 등장되게 되었다.   

# Subnet 과 Subnet Mask 

서브넷은 IP 주소에서 네트워크 영역을 부분적으로 나눈 부분 네트워크를 뜻한다. 이러한 서브넷을 만들 때 사용된 것이 바로 서브넷 마스크이다.  
즉, 서브넷마스크는 IP 주소 체계의 Network ID와 Host ID를 분리하는 역할을 한다.   

``` 
110x xxxx. xxxx xxxx. xxxx xxxx. xxxx xxxx
```

예를 들어 C 클래스는 기본적으로 앞의 24 비트는 Network ID, 뒤의 8비트는 Host ID를 나타낸다.   
이때 서브넷 마스크를 이용하면 원본 네트워크를 여러 개의 네트워크로 분리할 수 있다. 이러한 과정을 서브넷팅이라고 한다.   

``` 
A class - 0xxxxxxx xxxxxxxx xxxxxxxx xxxxxxxx 
# 십진표현 : 0.0.0.0 ~ 127.255.255.255 
# 기본 서브넷 마스크 : 255.0.0.0 
B class - 10xxxxxx xxxxxxxx xxxxxxxx xxxxxxxx
# 십진표현 : 0.0.0.0 ~ 191.255.255.255 
# 기본 서브넷 마스크 : 255.255.0.0 
C class - 110xxxxx xxxxxxxx xxxxxxxx xxxxxxxx
# 십진표현 : 192.0.0.0 ~ 223.255.255.255 
# 기본 서브넷 마스크 : 255.255.255.0 
```

각 클래스마다 기본 서브넷 마스크는 위 표와 같다(D, E 클래스는 사용하지 않음). 이러한 기본 서브넷 마스크를 이용하면 IP 주소의  
Network ID 와 Host ID를 구분할 수 있다. IP 주소에서 서브넷 마스크를 AND 연산하면 Network ID가 된다.   

# 서브넷팅 ( subnetting )

서브넷팅은 IP 주소 낭비를 방지하기 위해 원본 네트워크를 여러 개의 서브넷으로 분리하는 과정을 뜻한다. 서브넷팅은 서브넷 마스크의 bit 수를 
증가시키는 것이라고 생각하면 이해가 편하다. 서브넷 마스크의 bit 수를 1씩 증가시키면 할당할 수 있는 네트워크가 2배수로 증가하고 호스트 수는 
2배수로 감소한다.  

예를 들어 C 클래스인 192.168.32.0/24 를 서브넷 마스크의 bit 수를 1 증가 시켜서 192.168.32.0/25 로 변경한다고 하자.   

192.168.32.0/24는 원래의 네트워크였다. 이때 할당 가능한 host의 수는 2^8-2=254 개 이다. 여기서 2개를 빼는 이유는 첫번째는 주소인   
192.168.32.0 은 Network Address 로 쓰이고 마지막 주소인 192.168.32.255 는 Broadcast 로 쓰이기 때문에 호스트에 할당할 수 없기  
때문이다.   

이 때 서브넷 마스크의 bit 수를 1 증가 시켜서 192.168.32.0/25로 변경하게 되면 Network ID 부분을 나타내는 부분이 24비트에서 25비트로 증가하고   
Host ID를 나타내는 부분이 8개 비트에서 7개 비트로 줄어든다. 즉 할당 가능한 네트워크 수가 2개로 증가하고 각 네트워크(서브넷)당 할당가능한 호스트 수는  
2^7-2=126개로 줄어든다. 또한 서브넷 마스크가 255.255.255.128로 변한것을 확인할 수 있다. 

- 192.168.32.0 : 서브넷1의 Network Address
- 192.168.32.1~192.168.32.126 : 서브넷1의 host 할당 가능한 부분
- 192.168.32.127 : 서브넷1의 Broadcast Address
- 192.168.32.128 : 서브넷2의 NetworkAddress
- 192.168.32.129~192.168.32.254 : 서브넷2의 host 할당 가능한 부분
- 192.168.32.255 : 서브넷2의 Broadcast Address

# 참고 자료

> [[네트워크] 서브넷, 서브넷마스크, 서브넷팅이란? | 서브넷팅 예제](https://code-lab1.tistory.com/34)